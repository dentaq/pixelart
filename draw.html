<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>おえかき</title>
</head>
<link href="http://gessojs.com/style.css" type="text/css" rel="stylesheet" media="all">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
function func()	{
	//var bb = parseFloat(document.f1.border.value);
	//alert(bb);
	
	var w = parseFloat(document.f1.width.value);
	var h = parseFloat(document.f1.height.value);
	var wth = w*11;
	var ht = h*11;
	var divs = w*h;
	var cc = document.f1.color.value;
	window.localStorage.setItem("divs", divs);
	window.localStorage.setItem("wth", wth);
	window.localStorage.setItem("ht", ht);

	//alert(cc);
//	var h = xx/40*11;
	for(i=0; i<divs;i++){
	$('div#grid').append("<div>");
	$('div#grid div').eq(i).attr({id:"div"+i})
	$('div#grid').removeClass('default').css({
		width:wth,
		height:ht
		});
	}
	$(function(){
		$('div#grid div').click(function(){
			$(this).toggleClass(cc);
			var loc = $(this).attr("id");
			var cls = $(this).attr("class");
			//alert(loc);
			//alert(cls);
			 window.localStorage.setItem("loc", loc);
			 window.localStorage.setItem("cls",cls);
			})
});
}

//保存
    $(function(){
        //　ローカルストレージからフォームにデータを戻す
        $("#dLoad").click(function(){
			var divs = window.localStorage.getItem("divs", divs);
			var wth =	window.localStorage.getItem("wth", wth);
			var	ht = window.localStorage.getItem("ht", ht);
			alert(wth);
			alert(ht);
			alert(divs);

			for(i=0; i<divs;i++){
	$('div#grid').append("<div>");
	$('div#grid div').eq(i).attr({id:"div"+i})
	$('div#grid').removeClass('default').css({
		width:wth,
		height:ht
		});
	}
	
	
	
	
	
	
	
function load() {
  var list = document.getElementById("list");
  list.innerHTML = "";
  // ローカルストレージに格納されているすべての値を列挙
  for (var i = 0; i < localStorage.length; i++) {
    var key = localStorage.key(i);
    list.options[list.options.length] = new Option(localStorage[key], key);
  }
}	
	
	
	
	
            var val = window.localStorage.getItem("loc");
			var val2 = "#"+val;
            var val3 = window.localStorage.getItem("cls");


			alert(val2);
			$(val2).addClass(val3);
			
			});
    });
</script>
<body>
<form name="f1" action="#">
<div>
幅(横に並べるタイルの個数)
<select name="width">
<option value="0">0</option>
<option value="10">10</option>
<option value="20">20</option>
<option value="30" selected>30</option>
<option value="40">40</option>
<option value="50">50</option>
<option value="60">60</option>
<option value="70">70</option>
</select>
</div>
<div>
高さ(縦に並べるタイルの個数)
<select name="height">
<option value="0">0</option>
<option value="10">10</option>
<option value="20">20</option>
<option value="30" selected>30</option>
<option value="40">40</option>
<option value="50">50</option>
<option value="60">60</option>
<option value="70">70</option>
<option value="80">70</option>
<option value="90">70</option>
<option value="100">100</option>
<option value="110">110</option>
<option value="120">120</option>
<option value="130">130</option>
<option value="140">140</option>
</select>
<div>
color
<select name="color">
<option value="black" selected>black</option>
<option value="red">red</option>
<option value="blue">blue</option>
<option value="orenge">orenge</option>
<option value="brown">brown</option>
</select>
</div>
<div>
border
<select name="border">
<option value="yes" selected>あり</option>
<option value="no">なし</option>
</select>
</div>

<input type="button" value="決定！" onClick="func()">

</form>

<div id="grid" class="default"></div>

<form>
<input type="button" value="保存" id="dSave"><br>
<input type="button" value="読み出し" id="dLoad"><br>
</form>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-26963811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>